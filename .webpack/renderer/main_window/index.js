(()=>{const e=(e=>{let t=null,a=null;return{play:e=>{t&&t.stop(),a&&clearTimeout(a),t=new Howl({src:e}),t.play()},cancel:e=>{console.log(t),t&&(t.fade(1,0,1e3),a=setTimeout((e=>{t&&t.stop()}),5e3))}}})(),t={update:e=>{let t={};$("input, textarea").each(((e,a)=>{t[$(a).attr("id")]=$(a).val()})),api.sendMessage("detailsUpdated",JSON.stringify(t))},add:({key:e,index:t}={})=>{void 0===e&&(e=`custom-${t}`),void 0===t&&(t=parseInt(e.substring(7))),$("#add-markdown").before($.parseHTML(`\n            <div class="markdown-container custom-markdown">\n                <div class="markdown-header">\n                    <label for="${e}">Custom Text</label>\n                    <button class="remove-markdown">Remove</button>\n                    <button class="markdown-show">Show</button>\n                </div>\n                <textarea id="${e}" rows="4" placeholder="Custom markdown"></textarea>\n            </div>\n        `))}};window.onload=a=>{!async function(){$(document).on("click",".header-tab",(e=>{$(".panel-full").hide(),$(".header-tab").removeClass("selected");const t=$(e.target);$(`#panel-${t.attr("data-panel")}`).show(),t.addClass("selected")})),$(document).on("click",".clear",(t=>{const a=$(t.target).attr("data-type");api.sendMessage("clear",a),e.cancel()})),$(document).on("click","#clear-sfx",(t=>{console.log("clearing sfx"),e.cancel()})),$(document).on("click",".video-button",(e=>{api.sendMessage("playVideo",$(e.currentTarget).attr("data-url"))})),$(document).on("click",".markdown-show",(e=>{$(e.target).parent().siblings().each(((e,t)=>{api.sendMessage("showText",$(t).val())}))})),$(document).on("click","#add-markdown",(e=>{let a=$(".custom-markdown").length;t.add({index:a})})),$(document).on("click",".remove-markdown",(e=>{$(e.target).closest(".markdown-container").remove()})),$(document).on("click",".image-button",(e=>{console.log("image clicked"),api.sendMessage("imageClicked",$(e.currentTarget).attr("data-url"))})),$(document).on("click",".sfx-button",(t=>{const a=$(t.currentTarget).attr("data-url");e.play(a)})),$(document).on("keydown",(e=>{const t=parseInt(e.key);isNaN(t)||t>$(".sfx-button").length||new Howl({src:[$(".sfx-button").eq(t-1).attr("data-url")]}).play()})),$(document).on("keyup","input, textarea",(e=>{t.update()})),api.onListFiles((e=>{for(let t=0;t<e.videos.length;t++){const a=e.videos[t];console.log(a),$("#video-buttons").append($.parseHTML(`\n                <div class="video-button media-button" data-url="${a.url}">\n                    <video class="media-preview" src="${a.url}#t=5"></video>\n                    <p>${a.name}</p>\n                </div>\n            `))}for(let t=0;t<e.images.length;t++){const a=e.images[t];$("#image-buttons").append($.parseHTML(`\n                <div class="image-button media-button" data-url="${a.url}">\n                    <img class="media-preview" src="${a.url}">\n                    <p>${a.name}</p>\n                </div>\n            `))}for(let t=0;t<e.sfx.length;t++){const a=e.sfx[t],n=t<9?`(${t+1}) `:"";$("#sfx-buttons").append($.parseHTML(`\n                <button class="sfx-button" data-url="${a.url}">\n                    <img class="play-icon" src="./assets/play.png">\n                    <p>${n}${a.name}</p>\n                </button>\n            `))}})),api.onLoadPreviousText((e=>{console.log(e),e=JSON.parse(e);for(const[a,n]of Object.entries(e))0===$(`#${a}`).length&&t.add({key:a}),$(`#${a}`).val(n)})),api.sendMessage("getFiles"),document.getElementsByClassName("header-tab")[0].click()}()}})();
//# sourceMappingURL=index.js.map